Tags: 
PAA: ??? 
КДПВ
Тип: мнение
Labels: 
Тестирование
Тестирование IT-систем
Функциональное программирование
Совершенный код
Программирование

# Мета

	[x] тесты, которые ничего не проверяют (отсылку на Андрея Иванова)
	[x] тесты, которые проверяют, но если ломаются, ничего не понять.
	[x] код с большим числом if'ов, который тестируется через ... один вход
	[x] раздутый код + раздутые тесты - 
	[x] моки
	[x] альтернатива (светлая сторона)
		[x] критерии качества:
			[ ] общность программы - насколько много "случаев" охватывает программа
		[x] функциональный подход
		[x] убрать if'ы и boolean-флаги
		[x] строгая типизация
    [ ] непредставимость некорректных данных с помощью ADT-типов (https://www.youtube.com/watch?v=IcgmSRJHu_8&amp;ab_channel=elm-conf)
Цель: 
  отразить своё видение, как обеспечивать качество ПО
  указать на те проблемы юнит-тестов, которые противоречат моему видению способов обеспечения качества ПО.

  Почему в моём видении нет моков?
  Надо прочитать про моки и понять, каким образом мне до сих пор удавалось обходиться без них.

Задачи:
+ указать место, где стоит использовать юнит-тесты; 
- описать, что можно ожидать от тестов, а чего нельзя;
  - в частности, если обнаружено поведение, противоречащее требованиям (баг), то для него можно написать тест, чтобы в ходе разработки легко воспроизводить эту же самую проблему (если это экономически оправдано). По окончании исправления этот тест в значительной степени теряет свою полезность. Можно оставить как "регрессионное тестирование". Можно удалить через какое-то время.
  - тесты, частично фиксирующие основные требования. При рефакторинге позволяют обнаруживать грубые ошибки.
  - если сами требования сформулированы с условиями/флагами, то тесты должны включать примеры на каждый важный кейс;
- привести примеры "толковых" тестов;
- привести примеры "толковых" программ, не нуждающихся в тестах;
- упомянуть побочные задачи тестирования 
  - демонстрация того, как используется программа (библиотека, фреймворк),
  - обучение членов команды, 
- закон убывающей "предельной" (удельной) полезности - каждый последующий тест приносит, по-видимому, меньше пользы.
- пример кодирования, гарантирующего работу с базой - `Id` с opaque типом, доступным только при чтении из БД.
  `DBIO[Id]`
- Ограниченная польза юнит-тестов
- проанализировать типы ошибок и понять роль тестов/типов в сфере защиты от ошибок. Что разумно требовать от тестов, и чего ожидать не стоит.
- TODO: убрать нападки на моки? или понять, как достичь того же состояния иначе. Например, заменив statful зависимость на stateless, в которой состояние передаётся вместе с вызовом функции, а не в результате нескольких предшествующих действий.
План:
- 1. Бестолковые тесты. Примеры проблем с тестами.
  - ссылки на другие статьи с проблемами тестов
  - 
- 2. Качественное ПО. 
  - понятия, входящие в "качество ПО"
  - абстракции
  - табличное и алгоритмическое задание функции
  - эквивалентность
  1. Пример кодирования на основе типов
- Заключение
